/* === PREMIUM 120 FPS TRANSITIONS === */
/* Performance-first CSS system for cyber/retro-terminal theme */

/* === PERFORMANCE FOUNDATION === */
/* Force GPU compositing for all animated elements */
.fx-gpu-layer {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
  contain: layout paint size;
}

/* Remove will-change after animations complete to free GPU memory */
.fx-gpu-layer.fx-animation-complete {
  will-change: auto;
}

/* === CORE TRANSITION UTILITIES === */

/* Page fade with elevation - 160-220ms */
.fx-fade {
  opacity: 0;
  transform: translateY(8px) translateZ(0);
  transition: opacity 180ms cubic-bezier(0.23, 1, 0.32, 1),
              transform 180ms cubic-bezier(0.23, 1, 0.32, 1);
  will-change: transform, opacity;
  contain: layout paint size;
}

.fx-fade.fx-visible {
  opacity: 1;
  transform: translateY(0) translateZ(0);
}

/* Quick slide reveal - 140-200ms */
.fx-slide {
  opacity: 0;
  transform: translate3d(0, 12px, 0);
  transition: opacity 160ms cubic-bezier(0.23, 1, 0.32, 1),
              transform 160ms cubic-bezier(0.23, 1, 0.32, 1);
  will-change: transform, opacity;
  contain: layout paint size;
}

.fx-slide.fx-visible {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

/* Subtle neon glow pulse - 120-160ms */
.fx-glow {
  opacity: 0.7;
  transform: scale(0.98) translateZ(0);
  box-shadow: 0 0 0 rgba(30, 144, 255, 0);
  transition: opacity 140ms cubic-bezier(0.23, 1, 0.32, 1),
              transform 140ms cubic-bezier(0.23, 1, 0.32, 1),
              box-shadow 140ms cubic-bezier(0.23, 1, 0.32, 1);
  will-change: transform, opacity, box-shadow;
  contain: layout paint size;
}

.fx-glow:hover,
.fx-glow.fx-active {
  opacity: 1;
  transform: scale(1.0) translateZ(0);
  box-shadow: 0 0 20px rgba(30, 144, 255, 0.4),
              0 0 40px rgba(30, 144, 255, 0.1);
}

/* Click ripple system - 180ms total */
.fx-ripple {
  position: relative;
  overflow: hidden;
  will-change: transform;
  contain: layout paint size;
}

.fx-ripple-wave {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle, 
    rgba(30, 144, 255, 0.6) 0%, 
    rgba(70, 163, 255, 0.3) 40%, 
    transparent 70%);
  transform: scale(0) translateZ(0);
  animation: fx-ripple-expand 180ms cubic-bezier(0.23, 1, 0.32, 1);
  pointer-events: none;
  will-change: transform, opacity;
}

@keyframes fx-ripple-expand {
  0% {
    transform: scale(0) translateZ(0);
    opacity: 0.8;
  }
  50% {
    opacity: 0.4;
  }
  100% {
    transform: scale(2.5) translateZ(0);
    opacity: 0;
  }
}

/* === SPECIALIZED CYBER EFFECTS === */

/* Matrix glitch for terminal aesthetic */
.fx-glitch {
  position: relative;
  will-change: transform;
  contain: layout paint size;
}

.fx-glitch.fx-active {
  animation: fx-cyber-glitch 180ms cubic-bezier(0.23, 1, 0.32, 1);
}

@keyframes fx-cyber-glitch {
  0% { transform: translateX(0) translateZ(0); }
  20% { transform: translateX(-1px) translateZ(0); }
  40% { transform: translateX(1px) translateZ(0); }
  60% { transform: translateX(-0.5px) translateZ(0); }
  80% { transform: translateX(0.5px) translateZ(0); }
  100% { transform: translateX(0) translateZ(0); }
}

/* Neon border pulse */
.fx-neon-border {
  border: 1px solid rgba(30, 144, 255, 0.3);
  transition: border-color 140ms cubic-bezier(0.23, 1, 0.32, 1),
              box-shadow 140ms cubic-bezier(0.23, 1, 0.32, 1);
  will-change: border-color, box-shadow;
  contain: layout paint size;
}

.fx-neon-border:hover,
.fx-neon-border.fx-active {
  border-color: rgba(30, 144, 255, 0.8);
  box-shadow: 0 0 15px rgba(30, 144, 255, 0.3),
              inset 0 0 15px rgba(30, 144, 255, 0.1);
}

/* Terminal scan line effect */
.fx-scan-line {
  position: relative;
  overflow: hidden;
  contain: layout paint size;
}

.fx-scan-line::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 2px;
  background: linear-gradient(90deg, 
    transparent 0%, 
    rgba(30, 144, 255, 0.8) 50%, 
    transparent 100%);
  will-change: transform;
  transition: transform 200ms cubic-bezier(0.23, 1, 0.32, 1);
}

.fx-scan-line.fx-active::after {
  transform: translateX(200%);
}

/* === PAGE TRANSITIONS === */

/* Premium page transition wrapper */
.fx-page-transition {
  will-change: transform, opacity;
  contain: layout paint size;
}

/* Page enter animation */
.fx-page-enter {
  opacity: 0;
  transform: translate3d(0, 8px, 0) scale(0.98);
}

.fx-page-enter-active {
  opacity: 1;
  transform: translate3d(0, 0, 0) scale(1);
  transition: opacity 200ms cubic-bezier(0.23, 1, 0.32, 1),
              transform 200ms cubic-bezier(0.23, 1, 0.32, 1);
}

/* Page exit animation */
.fx-page-exit {
  opacity: 1;
  transform: translate3d(0, 0, 0) scale(1);
}

.fx-page-exit-active {
  opacity: 0;
  transform: translate3d(0, -8px, 0) scale(1.02);
  transition: opacity 160ms cubic-bezier(0.55, 0.085, 0.68, 0.53),
              transform 160ms cubic-bezier(0.55, 0.085, 0.68, 0.53);
}

/* === MOBILE OPTIMIZATIONS === */
@media (max-width: 768px) {
  /* Reduce transition durations on mobile */
  .fx-fade, .fx-slide, .fx-glow {
    transition-duration: 120ms;
  }
  
  .fx-page-enter-active {
    transition-duration: 160ms;
  }
  
  .fx-page-exit-active {
    transition-duration: 120ms;
  }
  
  /* Disable complex effects on mobile for performance */
  .fx-glow:hover,
  .fx-glow.fx-active {
    box-shadow: 0 0 10px rgba(30, 144, 255, 0.3);
  }
  
  .fx-neon-border:hover,
  .fx-neon-border.fx-active {
    box-shadow: 0 0 8px rgba(30, 144, 255, 0.2);
  }
}

/* === REDUCED MOTION SUPPORT === */
@media (prefers-reduced-motion: reduce) {
  /* Replace all motion with instant state changes + glow intensity */
  .fx-fade,
  .fx-slide,
  .fx-glow,
  .fx-page-enter-active,
  .fx-page-exit-active,
  .fx-neon-border,
  .fx-scan-line::after {
    transition-duration: 1ms !important;
    animation-duration: 1ms !important;
  }
  
  .fx-glitch.fx-active {
    animation: none;
  }
  
  /* Enhance glow intensity instead of motion */
  .fx-glow:hover,
  .fx-glow.fx-active {
    box-shadow: 0 0 25px rgba(30, 144, 255, 0.6),
                0 0 50px rgba(30, 144, 255, 0.2);
  }
  
  .fx-neon-border:hover,
  .fx-neon-border.fx-active {
    border-color: rgba(30, 144, 255, 1);
    box-shadow: 0 0 20px rgba(30, 144, 255, 0.5),
                inset 0 0 20px rgba(30, 144, 255, 0.2);
  }
}

/* === HIGH REFRESH RATE OPTIMIZATIONS === */
@media (min-resolution: 120dpi) and (min-refresh-rate: 120hz) {
  /* Enhance for 120Hz+ displays */
  .fx-fade,
  .fx-slide,
  .fx-glow {
    transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
  }
  
  .fx-ripple-wave {
    animation-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
  }
}

/* === UTILITY CLASSES === */

/* Focus management for keyboard navigation */
.fx-focus-visible {
  outline: 2px solid rgba(30, 144, 255, 0.8);
  outline-offset: 2px;
  transition: outline-color 100ms ease;
}

/* Performance monitoring classes */
.fx-performance-critical {
  /* Mark elements that should never drop frames */
  will-change: transform, opacity;
  contain: strict;
}

.fx-performance-budget {
  /* Elements with strict 3ms budget */
  transition-duration: 150ms;
  will-change: transform, opacity;
  contain: layout paint;
}

/* Layer management */
.fx-create-layer {
  will-change: transform, opacity;
  transform: translateZ(0);
}

.fx-destroy-layer {
  will-change: auto;
  transform: none;
}

/* === HOVER-CAPABLE DEVICE OPTIMIZATIONS === */
@media (hover: hover) and (pointer: fine) {
  /* Pre-create layers on hover-capable devices */
  .fx-glow,
  .fx-neon-border,
  .fx-ripple {
    will-change: transform, opacity, box-shadow;
  }
}

@media (hover: none) {
  /* Destroy unnecessary layers on touch devices */
  .fx-glow,
  .fx-neon-border {
    will-change: auto;
  }
  
  /* Simplify touch interactions */
  .fx-glow:active {
    opacity: 1;
    transform: scale(0.98) translateZ(0);
  }
}

/* === DEBUGGING UTILITIES (DEVELOPMENT ONLY) === */
.fx-debug-performance {
  position: relative;
}

.fx-debug-performance::before {
  content: attr(data-fps);
  position: absolute;
  top: -20px;
  right: 0;
  background: rgba(255, 0, 0, 0.8);
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  font-family: monospace;
  border-radius: 2px;
  z-index: 9999;
  pointer-events: none;
}
